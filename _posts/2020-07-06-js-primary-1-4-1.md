---
title: 【JS知识体系：1-4-1】javascript异步
date:  2020-07-06 23:04:49 +0800
category: 前端
tags: ['JS', 'JS基础知识']
excerpt:
---

# 异步



## 1. 什么是同步和异步

我将从吃晚饭这件事来谈同步和异步。

场景再现，今天下班回到家，我要为我的晚饭而忙碌了。我们把吃晚饭当做是一个任务，我们可以继续对该任务继续划分一下子任务：

第一种分法：分为买菜，煮饭，炒菜，吃饭

因为吃饭与煮饭and炒菜有依赖关系（总得有饭有菜我们才能开始吃饭）,炒菜又与买菜有依赖关系（总得有菜下锅），所以吃饭这个任务的执行序列可以是以下几种。

序列一：买菜 => 炒菜 => 煮饭 => 吃饭

序列二：买菜 => 煮饭 => 炒菜 => 吃饭

序列三：煮饭 => 买菜 => 炒菜 => 吃饭



第二种分法：分为准备晚饭和吃饭

这样分执行序列只能是下面的序列

准备晚饭（包括买菜，煮饭，炒菜） => 吃饭



第三种分法：分为准备菜、准备饭、吃饭



你可能会说两种，

准备菜 => 准备饭 => 吃饭

准备饭 => 准备菜 => 吃饭



如果你是这样想的，那我要恭喜你，你的思维和js引擎的想法是一模一样的！

js是单线程语言，一回只能做一件事，就像没有女朋友的我一样，一个人忙碌也只能一次做一件事。

**这种任务排队执行的方式就叫做同步。**

那么异步的概念也就很容易理解了，

**异步就是我能边做着这件事，又做着另外一件事。**

没错，我现在就要告诉你，我能边准备饭，又能边准备菜，

因为我的操作是和分法一的序列二一样的，我在准备菜这件任务还没有结束的情况下开始了准备饭这件任务，又在准备饭没有结束（饭没熟）的情况下，执行准备菜这件任务的下半段（炒菜）。



所以到这里你不难看出，这里的异步本质还是同步，js中异步的实质就是，将任务分成几个子任务，让它在将来的某一段时间执行。

那为什么我要吃个饭还要讲究异步呢？

不是因为我是程序员。而是这样做最大程度上节省了我的时间。

js程序设计中采用这种方式来编程的话也必然是为了提高代码执行效率，提升用户体验。



## 2. 如何实现异步

读完了上面的讲解，相信你看到这个问题一定会明白它想问的其实是：如何把一个任务分成两个任务然后放在特定的时段执行。

把一个任务分成两个任务非常简单，写两个函数就好了，关键是如何控制第二个任务在特定的时段执行。



以下只讲解ES6出现之前的处理方式，ES6之后的实现方式请等待ES6系列文章更新。



### 2.1 回调函数

什么是回调函数。函数A作为值被函数B调用的时候当做实参传入，函数A在函数B中调用。这里的函数A就叫做回调函数。

```js
function A() { // do something.. }
function B(callback) {
    // do something..
    callback();
}
B(A);
```





